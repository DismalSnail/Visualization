<!DOCTYPE html>

<html>

<head>
    <meta charset="UTF-8">
    <title>盐城共享单车网络</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <script src="http://api.map.baidu.com/api?v=3.0&ak=DekeYzYeAYX1nA8fYzw1lt6uqTVXe8Bt&s=1"></script>
    <script type="text/javascript" src="js/jquery-3.3.1.js"></script>
    <script type="text/javascript" src="js/echarts.js"></script>
    <script type="text/javascript" src="js/echarts-gl.js"></script>
    <script type="text/javascript" src="js/bmap.min.js"></script>
</head>
<body>
<div id="main" style="width: 1920px;height:800px;"></div>


<script type="text/javascript">
    var myChart = echarts.init(document.getElementById('main'));
    var geoCoordMap = {};
    var converData = function (data) {
        var res = [];
        for (let i = 0; i < data.length; i++) {
            res.push(
                {
                    name: data[i].stationID,
                    value: [data[i].longitude, data[i].latitude]
                }
            )
        }
        return res;
    };

    // myChart.showLoading();
    $.getJSON('JSON/data.json', function (data) {

        option = {
            // backgroundColor: '#404a59',
            title: {
                text: '盐城共享单车网络',
                left: 'center',
                textStyle: {
                    color: '#c67752'
                }
            },
            tooltip: {
                trigger: 'item',
            },
            bmap: {
                center: [120.20, 33.38],
                zoom: 14,
                roam: true,
                mapStyle: {
                    styleJson: [
                        {
                            'featureType': 'water',
                            'elementType': 'all',
                            'stylers': {
                                'color': '#031628'
                            }
                        },
                        {
                            'featureType': 'land',
                            'elementType': 'geometry',
                            'stylers': {
                                'color': '#000102'
                            }
                        },
                        {
                            'featureType': 'highway',
                            'elementType': 'all',
                            'stylers': {
                                'visibility': 'off'
                            }
                        },
                        {
                            'featureType': 'arterial',
                            'elementType': 'geometry.fill',
                            'stylers': {
                                'color': '#000000'
                            }
                        },
                        {
                            'featureType': 'arterial',
                            'elementType': 'geometry.stroke',
                            'stylers': {
                                'color': '#0b3d51'
                            }
                        },
                        {
                            'featureType': 'local',
                            'elementType': 'geometry',
                            'stylers': {
                                'color': '#000000'
                            }
                        },
                        {
                            'featureType': 'railway',
                            'elementType': 'geometry.fill',
                            'stylers': {
                                'color': '#000000'
                            }
                        },
                        {
                            'featureType': 'railway',
                            'elementType': 'geometry.stroke',
                            'stylers': {
                                'color': '#08304b'
                            }
                        },
                        {
                            'featureType': 'subway',
                            'elementType': 'geometry',
                            'stylers': {
                                'lightness': -70
                            }
                        },
                        {
                            'featureType': 'building',
                            'elementType': 'geometry.fill',
                            'stylers': {
                                'color': '#000000'
                            }
                        },
                        {
                            'featureType': 'all',
                            'elementType': 'labels.text.fill',
                            'stylers': {
                                'color': '#857f7f'
                            }
                        },
                        {
                            'featureType': 'all',
                            'elementType': 'labels.text.stroke',
                            'stylers': {
                                'color': '#000000'
                            }
                        },
                        {
                            'featureType': 'building',
                            'elementType': 'geometry',
                            'stylers': {
                                'color': '#022338'
                            }
                        },
                        {
                            'featureType': 'green',
                            'elementType': 'geometry',
                            'stylers': {
                                'color': '#062032'
                            }
                        },
                        {
                            'featureType': 'boundary',
                            'elementType': 'all',
                            'stylers': {
                                'color': '#465b6c'
                            }
                        },
                        {
                            'featureType': 'manmade',
                            'elementType': 'all',
                            'stylers': {
                                'color': '#022338'
                            }
                        },
                        {
                            'featureType': 'label',
                            'elementType': 'all',
                            'stylers': {
                                'visibility': 'off'
                            }
                        }
                    ]
                }
            },
            series: [
                {
                    name: 'station',
                    type: 'effectScatter',
                    coordinateSystem: 'bmap',
                    data: converData(data.location),
                    tooltip:{
                        show:true,
                        trigger:'item',
                        formatter:function (params) {
                            return 'stationID:'+ params.name + '<br/>' + 'longitude:'+ params.value[0]+'<br/>'+'latitude:'+params.value[1];
                        }
                    },
                    symbolSize: 3,
                    showEffectOn:'render',
                    rippleEffect:{
                      brushType: 'stroke'
                    },
                    hoverAnimation:true,
                    label:{
                        normal:{
                            formatter:'{b}',
                            position:'right',
                            show:false
                        },
                        emphasis: {
                            show:true
                        }
                    },
                    itemStyle: {
                        normal: {
                            color: 'yellow',
                            shadowBlur:1,
                            shadowColor:'#333'
                        }
                    }
                },
                {
                    name: 'station-lines',
                    type: 'lines',
                    large:true,
                    largeThreshold:100,
                    coordinateSystem: 'bmap',
                    data: [
                        {
                            coords: [[120.168799, 33.354391], [120.161685, 33.353931]]
                        },
                        {
                            coords: [[120.168799, 33.354391], [120.162989, 33.353818]]
                        }
                    ],
                    lineStyle:{
                        curveness:0.25
                    }
                }
            ]
        };

        myChart.setOption(option);
    });
</script>
</body>
</html>